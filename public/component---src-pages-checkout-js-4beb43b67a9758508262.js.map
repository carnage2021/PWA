{"version":3,"file":"component---src-pages-checkout-js-4beb43b67a9758508262.js","mappings":"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","sources":["webpack://indiaohyes/./src/pages/checkout.js"],"sourcesContent":["import { Link, navigate } from 'gatsby'\nimport React, { useState, useEffect } from 'react';\nimport axios, { URL } from '../services/api';\nimport isLoggedIn from '../services/auth';\n\n\nfunction loadScript(src) {\n    return new Promise((resolve) => {\n        const script = document.createElement('script')\n        script.src = src\n        script.onload = () => {\n            resolve(true)\n        }\n        script.onerror = () => {\n            resolve(false)\n        }\n        document.body.appendChild(script)\n    })\n}\n\nconst Checkout = () => {\n\n    const [Details, setDetails] = useState();\n    \n    const [addressFormDisplay, setAddressFormDisplay] = useState();\n    const [user, setUser] = useState();\n    const [cart, setCart] = useState();\n    const [SelectedItems, setSelectedItems] = useState();\n\n    useEffect(() => {\n        if (!isLoggedIn())\n            return navigate('/login');\n\n        axios\n            .get('/users/cart')\n            .then(res => {\n                setDetails(res.data.data.cart)\n\n            })\n            .catch(err => {\n                setDetails([]);\n                console.log(err.response);\n            });\n\n\n        axios\n            .get('/order')\n            .then(res => {\n\n\n            })\n            .catch(err => {\n\n                console.log(err.response);\n            });\n\n\n        axios\n            .get('/users/me')\n            .then(res => {\n                setUser(res.data.data.user);\n            })\n            .catch(err => {\n                setUser({});\n                navigate('/login');\n                console.log(err.response);\n            });\n\n        axios\n            .get('/users/cart')\n            .then(res => setCart(res.data.data.cart))\n            .catch(err => {\n                setCart([]);\n                console.log(err.response);\n            });\n\n    }, []);\n\n\n    async function displayRazorpay() {\n        const res = await loadScript('https://checkout.razorpay.com/v1/checkout.js')\n\n        if (!res) {\n            alert('Razorpay SDK failed to load. Are you online?')\n            return\n        }\n\n        const data = await fetch('http://localhost:3000/api/order', { method: 'POST' }).then((t) =>\n            t.json()\n        )\n\n        console.log(data)\n        \n\n\n        const options = {\n            key: 'rzp_test_riR65g07X6XqfK',\n            currency: data.currency,\n            amount: data.amount,\n            order_id: data.o_id,\n            name: 'Donation',\n            description: 'Thank you for nothing. Please give us some money',\n            image: '',\n            handler: function (response) {\n                if (response.razorpay_payment_id != null) {\n\n                    axios\n                        .post('/placeorder/place-order',{\n\n                            payment_id : response.razorpay_payment_id,\n                            razorpay_signature : response.razorpay_signature,\n                            oder_id : data.o_id\n                        })\n                        \n                        .then(res => {\n                                console.log(res);\n                                \n                                \n                        })\n                       \n                        .catch(err => {\n                            console.log(err.response);\n                        });\n\n\n                } else {\n                    alert(\"payment not succesfull\")\n                }\n                alert(response.razorpay_signature)\n                alert(response.razorpay_payment_id)\n                alert(data.o_id)\n\n\n\n            },\n\n            prefill: {\n                name: user.name,\n                email: user.email,\n                phone_number: user.phone\n            }\n        }\n\n\n        const paymentObject = new window.Razorpay(options)\n        paymentObject.open()\n    }\n\n    \n\n\n    return (\n        <div className='div h-screen bg-gray-100'>\n\n            <div className='h-full w-full flex tab-port:flex-col'>\n                <div className='w-full h-full bg-gray-100 py-6 px-3 '  >\n\n                    <div className='flex items-center font-light' >\n                        <Link to='/shop'>\n                            <svg xmlns='http://www.w3.org/2000/svg' className='h-5 w-5' fill='none' viewBox='0 0 24 24' stroke='currentColor'>\n                                <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 19l-7-7 7-7' />\n                            </svg>\n                        </Link>\n\n                        <button><Link to='/shop'>Back to cart</Link></button>\n                    </div>\n\n\n\n                    <span className='mt-3 block'>Shipping address </span>\n\n                    <div>\n                        {\n                            user?.address.map((addr, i) => (\n                                <div key={i} className='w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3'>\n                                    <div className='flex space-x-2 items-center'>\n                                        <div className='rounded-full h-4 w-4 border-2 border-gray-700 '>\n\n                                        </div>\n\n                                        <div className='text-sm truncate text-gray-500 '>{addr}</div>\n                                    </div>\n\n\n                                    <div className='flex space-x-2  '>\n                                        <Link to='/profile' className='text-sm text-purple-600 block'> Edit</Link>\n                                    </div>\n\n                                </div>\n                            ))\n                        }\n\n\n                        <div className='w-full py-1  justify-between px-2 bg-white shadow-sm mt-3'>\n\n                            <div className='flex  mb-2 pt-2'>\n                                <input type='checkbox' className='hidden' onChange={e => setAddressFormDisplay(e.target.checked)} id='addnew' />\n                                <label htmlFor='addnew' className='rounded-full h-4 w-4 border-2 border-gray-700 flex justify-center items-center p-[1px]'>\n                                    <div className={`rounded-full bg-purple-700 h-full w-full ${addressFormDisplay ? '' : 'hidden'}`}>\n                                    </div>\n                                </label>\n                                <div className='text-sm truncate text-gray-500 ml-2'>Add New Address </div>\n\n\n                            </div>\n                            <form onSubmit={async e => {\n                                e.preventDefault();\n\n                                let addr = [\n                                    e.target['address'].value,\n                                    e.target['city'].value,\n                                    e.target['state'].value,\n                                    e.target['zip'].value\n                                ].join(' ');\n\n                                try {\n                                    const response = await axios.patch('users/me', { address: [...user.address, addr] });\n\n                                    setUser(response.data.data.user);\n                                }\n                                catch (err) {\n                                    console.log(err);\n                                    console.log(err.response);\n                                    console.log(err.response?.data);\n                                }\n                            }}\n                            >\n                                <div className={addressFormDisplay ? '' : 'hidden'}>\n                                    <div className='w-full   mb-2'>\n                                        <label className='block uppercase tracking-wide text-gray-700 text-xs font-bold  mb-1' >\n                                            ADDRESS\n                                        </label>\n                                        <input id='address' className='appearance-none block w-full bg-gray-200 text-gray-700 border focus:border-solid  focus:border-purple-500 rounded py-2 px-4  leading-tight focus:outline-none focus:bg-white' type='text' placeholder='street' required={true} />\n                                    </div>\n\n\n\n                                    <div className='flex mx-3 mb-2'>\n                                        <div className='w-full md:w-1/3 px-3 mb-3 md:mb-0'>\n                                            <label className='block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2' for='grid-city'>\n                                                City\n                                            </label>\n                                            <input id='city' className='appearance-none block w-full bg-gray-200 text-gray-700 focus:border-solid border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white  focus:border-purple-500' type='text' placeholder='Vadodara'>\n                                            </input>\n                                        </div>\n                                        <div className='w-full md:w-1/3 px-3 mb-3 md:mb-0'>\n                                            <label className='block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2' for='grid-city'>\n                                                State\n                                            </label>\n                                            <input id='state' className='appearance-none block w-full bg-gray-200 text-gray-700 focus:border-solid border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white  focus:border-purple-500 ' type='text' placeholder='Gujarat'>\n                                            </input>\n                                        </div>\n                                        <div className='w-full md:w-1/3 px-3 mb-3 md:mb-0'>\n                                            <label className='block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2' for='grid-zip'>\n                                                Zip\n                                            </label>\n                                            <input id='zip' className='appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-purple-500 focus:border-solid' type='text' placeholder='90210'></input>\n                                        </div>\n                                    </div>\n                                    <div className='flex justify-end space-x-5 mr-5 mt-5 mb-4'>\n                                        <button className='bg-transparent hover:bg-purple-500 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded'>\n                                            Reset\n                                        </button>\n\n                                        <button className='bg-purple-200 hover:bg-purple-500 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 rounded'>\n                                            Save\n                                        </button>\n\n\n\n                                    </div>\n\n\n                                </div>\n\n\n                            </form>\n\n\n\n                        </div>\n\n\n\n                    </div>\n\n                    <div>\n\n\n                        <span className='mt-10 block '>Payment Method  </span>\n\n                        <div className=''>\n                            <div className='w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3'>\n\n                                <div className='flex space-x-2 items-center'>\n                                    <input type=\"radio\" class=\"form-radio h-4 w-4\" name=\"accountType\" value=\"personal\" id='offline' />\n\n\n                                    <div className='text-sm truncate text-gray-500 '>Debit or Credit Card </div>\n                                </div>\n\n\n                            </div>\n\n                            <div className='w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3'>\n\n                                <div className='flex space-x-2 items-center'>\n                                    <label class=\"inline-flex items-center\">\n                                        <input type=\"radio\" className='form-radio text-purple-400 h-4 w-4' name=\"accountType\" value=\"personal\" id='offline' />\n\n                                    </label>\n                                    <div className='text-sm truncate text-gray-500 '>Cash On Delivery  </div>\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                    </div>\n\n                </div>\n                {\n                    Details\n                        ?\n                        <div className='w-2/3 h-full px-4 mt-8 tab-port:w-full'>\n\n                            <div className='bg-white w-full py-8 flex flex-col px-3 '>\n\n                                <span className=''> Order Summary </span>\n\n                                <div className='text-sm font-normal  mt-4'>\n                                    <div className='flex justify-between'>\n                                        <div>\n                                            <span >Items</span>\n                                            <span> ():</span>\n                                        </div>\n\n                                        <span>₹{Details.totalPrice || 0}</span>\n                                    </div>\n\n                                    <div className='flex justify-between'>\n                                        <div>\n                                            <span >Shipping & Handling </span>\n\n                                        </div>\n\n                                        <span>₹23</span>\n                                    </div>\n\n                                    <div className='flex justify-between'>\n                                        <div>\n                                            <span >tax</span>\n\n                                        </div>\n\n                                        <span>₹12</span>\n                                    </div>\n\n                                    <div className='border-2 mx-3 mt-6'></div>\n\n                                    <div className='flex justify-between text-base mt-4'>\n                                        <div>\n                                            <span >Total</span>\n\n                                        </div>\n\n                                        <span>₹{(Details.totalPrice + Details.totalPrice / 10) || 0}</span>\n                                    </div>\n                                </div>\n                                <div className='flex flex-col space-y-2'>\n                                    <button className='bg-purple-400 px-8 py-2 rounded mt-4 text-white' onClick={displayRazorpay}>Place Order</button>\n\n                                    <p className='text-xs font-light text-gray-500'>By placing your order agree to our company <span className='underline'>Privacy policy</span>  and <span className='underline'>Conditions of use</span></p>\n                                </div>\n                            </div>\n\n                        </div>\n                        : <></>\n                }\n\n            </div>\n\n\n        </div>\n    )\n}\n\n\nexport default Checkout;"],"names":["loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","useState","Details","setDetails","addressFormDisplay","setAddressFormDisplay","user","setUser","setCart","alert","fetch","method","then","t","json","data","console","log","options","key","currency","amount","order_id","o_id","name","description","image","handler","response","razorpay_payment_id","axios","payment_id","razorpay_signature","oder_id","res","catch","err","prefill","email","phone_number","phone","window","Razorpay","open","useEffect","isLoggedIn","navigate","cart","className","Link","to","xmlns","fill","viewBox","stroke","d","address","map","addr","i","type","onChange","e","target","checked","id","htmlFor","onSubmit","preventDefault","value","join","placeholder","required","for","class","totalPrice","onClick"],"sourceRoot":""}